import { TutorialStep } from "$/components/tutorials/TutorialStep"

export const files = import.meta.glob("./files/*", { eager: true, query: "?raw" })

## JSX Advanced

Now let's explore more advanced JSX patterns: rendering lists, 
conditional rendering, and dynamic styling by building a blog posts app with multiple components.

<TutorialStep 
  stepId="jsx-advanced-render-list"
  validator={(code) => {
    return code.includes('import { PostList } from "./PostList"') &&
      code.includes('<PostList posts={posts}')
  }}
> 
  Let's start with rendering a list of posts using `map()`. Update `App.jsx` to render the posts in a list:

  ```jsx
  import { PostItem } from "./PostItem" // [!code ++]

  export function App() {
    const posts = [
      { id: 1, title: "Getting Started with Kaioken", content: "Learn the basics of this modern framework", published: true },
      { id: 2, title: "Advanced JSX Patterns", content: "Explore dynamic rendering and component composition", published: false },
      { id: 3, title: "State Management Tips", content: "Best practices for managing app state", published: true }
    ]
    
    return (
      <div>
        |++{posts.map(post => (<PostItem key={post.id} post={post} />))}++|
      </div>
    )
  }
  ```
</TutorialStep>

<TutorialStep 
  stepId="jsx-advanced-post-item"
  watchFile="PostItem.jsx"
  validator={(code) => {
    return code.includes('export function PostItem') &&
      code.includes('{post.title}') &&
      code.includes('{post.content}') &&
      code.includes('post.published') &&
      code.includes('Published') &&
      code.includes('Draft')
  }}
> 
  Now let's enhance the `PostItem.jsx` component to display the post's title, content, and publication status:

  ```jsx
  export function PostItem({ post }) {
    return (
      <article style={{ 
        border: '1px solid #ddd', 
        borderRadius: '8px', 
        padding: '16px', 
        margin: '16px 0',
        backgroundColor: post.published ? '#f8f9fa' : '#fff3cd'
      }}>
        <h3>{post.title}</h3>
        <p>{post.content}</p>
        <span style={{ 
          color: post.published ? '#28a745' : '#ffc107',
          fontWeight: 'bold'
        }}>
          {post.published ? '‚úÖ Published' : 'üìù Draft'}
        </span>
      </article>
    )
  }
  ```

  This component accepts a `post` prop and renders it with conditional styling based on the `published` status.
</TutorialStep>

<TutorialStep 
  stepId="jsx-advanced-post-list"
  watchFile="PostList.jsx"
  validator={(code) => {
    return code.includes('export function PostList') && code.includes('import') && code.includes('PostItem') && code.includes('.map(') && code.includes('key={post.id}')
  }}
>
  ## Step 3: Create PostList Component
  
  Update the `PostList.jsx` component to use PostItem and handle the list logic:

  ```jsx
  import { PostItem } from "./PostItem"

  export function PostList({ posts }) {
    if (posts.length === 0) {
      return <p>No posts yet. Start writing!</p>
    }

    return (
      <div>
        {posts.map(post => (
          <PostItem
            key={post.id}
            post={post}
          />
        ))}
      </div>
    )
  }
  ```

  This component handles the list logic and conditional rendering when there are no posts.
</TutorialStep>

<TutorialStep 
  stepId="jsx-advanced-use-components"
  validator={(code) => {
    return code.includes('import') && code.includes('PostList') && code.includes('<PostList') && code.includes('publishedCount')
  }}
>
  ## Step 4: Use the Components
  
  Finally, update your `App.jsx` to use the new components with additional features:

  ```jsx
  import { PostList } from "./PostList"

  export function App() {
    const posts = [
      { id: 1, title: "Getting Started with Kaioken", content: "Learn the basics of this modern framework", published: true },
      { id: 2, title: "Advanced JSX Patterns", content: "Explore dynamic rendering and component composition", published: false },
      { id: 3, title: "State Management Tips", content: "Best practices for managing app state", published: true }
    ]
    
    const publishedCount = posts.filter(post => post.published).length
    const draftCount = posts.length - publishedCount
    
    return (
      <div style={{ padding: '20px', maxWidth: '800px', margin: '0 auto' }}>
        <h1>üìù My Blog Posts</h1>
        <div style={{ marginBottom: '20px' }}>
          <span style={{ marginRight: '20px' }}>Published: {publishedCount}</span>
          <span>Drafts: {draftCount}</span>
        </div>
        
        <PostList posts={posts} />
        
        {publishedCount === posts.length && posts.length > 0 && (
          <div style={{ color: 'green', fontWeight: 'bold', marginTop: '20px', textAlign: 'center' }}>
            üéâ All posts are published!
          </div>
        )}
      </div>
    )
  }
  ```

  Now you have a modular blog posts app with separate, reusable components!
</TutorialStep>

<div className="flex justify-between">
  <a href="/tutorial/jsx/basics" className="link-button">Previous: JSX Basics</a>
  <a href="/tutorial/state/hooks" className="link-button">Next: State & Hooks</a>
</div>