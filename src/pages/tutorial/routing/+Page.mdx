import { TutorialStep } from "$/components/tutorials/TutorialStep"

export const files = import.meta.glob("./files/*", { eager: true, query: "?raw" })

## Routing - Navigate Between Pages

Kaioken's built-in router makes it easy to create single-page applications with multiple views.

<TutorialStep 
  stepId="routing-basic-setup"
  validator={(code) => {
    // Check if the code sets up Router and Route components
    return code.includes('<Router>') && code.includes('<Route path="/"') && code.includes('element={')
  }}
>
  Let's set up basic routing. Create a Router with some routes:

  ```jsx
  import { Router, Route } from "kaioken/router"

  function HomePage() {
    return <h1>Home Page</h1>
  }

  function AboutPage() {
    return <h1>About Page</h1>
  }

  export function App() {
    return (
      <Router>
        <Route path="/" element={<HomePage />} />
        <Route path="/about" element={<AboutPage />} />
      </Router>
    )
  }
  ```

  Each Route matches a URL path and renders the specified element.
</TutorialStep>

<TutorialStep 
  stepId="routing-create-homepage"
  
  validator={(code) => {
    // Check if HomePage component exists with navigation
    return code.includes('export function HomePage') && code.includes('navigate')
  }}
>
  Let's create a separate `HomePage.jsx` component file:

  ```jsx
  import { navigate } from "kaioken/router"

  export function HomePage() {
    return (
      <div style={{ padding: "20px" }}>
        <h2>üè† Home</h2>
        <p>Welcome to our app!</p>
        <button onclick={() => navigate('/about')}>
          Go to About (programmatic navigation)
        </button>
      </div>
    )
  }
  ```

  This component demonstrates programmatic navigation using the `navigate` function.
</TutorialStep>

<TutorialStep 
  stepId="routing-create-navigation"
  
  validator={(code) => {
    // Check if Navigation component exists with Link components
    return code.includes('export function Navigation') && code.includes('<Link to="/"') && code.includes('<Link to="/about"')
  }}
>
  Create a `Navigation.jsx` component for client-side navigation:

  ```jsx
  import { Link } from "kaioken/router"

  export function Navigation() {
    return (
      <nav style={{ 
        padding: "20px", 
        borderBottom: "2px solid #ccc",
        backgroundColor: "#f8f9fa"
      }}>
        <div style={{ display: "flex", gap: "20px" }}>
          <Link 
            to="/" 
            style={{ 
              textDecoration: "none", 
              color: "#007bff",
              fontWeight: "bold"
            }}
          >
            Home
          </Link>
          <Link 
            to="/about" 
            style={{ 
              textDecoration: "none", 
              color: "#007bff",
              fontWeight: "bold"
            }}
          >
            About
          </Link>
          <Link 
            to="/users" 
            style={{ 
              textDecoration: "none", 
              color: "#007bff",
              fontWeight: "bold"
            }}
          >
            Users
          </Link>
        </div>
      </nav>
    )
  }
  ```

  Links provide fast navigation without page reloads.
</TutorialStep>

<TutorialStep 
  stepId="routing-dynamic-routes"
  
  validator={(code) => {
    // Check if UserPage component exists with useRouter
    return code.includes('export function UserPage') && code.includes('useRouter') && code.includes('router.params.id')
  }}
>
  Create a `UserPage.jsx` component for dynamic routes:

  ```jsx
  import { useRouter, Link } from "kaioken/router"

  export function UserPage() {
    const router = useRouter()
    const userId = router.params.id
    
    // Simulate user data
    const users = {
      '123': { name: 'John Doe', email: 'john@example.com' },
      '456': { name: 'Jane Smith', email: 'jane@example.com' }
    }
    
    const user = users[userId]
    
    if (!user) {
      return (
        <div style={{ padding: "20px" }}>
          <h2>User Not Found</h2>
          <Link to="/">‚Üê Back to Home</Link>
        </div>
      )
    }
    
    return (
      <div style={{ padding: "20px" }}>
        <Link to="/">‚Üê Back to Home</Link>
        <h2>User Profile</h2>
        <p><strong>ID:</strong> {userId}</p>
        <p><strong>Name:</strong> {user.name}</p>
        <p><strong>Email:</strong> {user.email}</p>
        <p><strong>Current path:</strong> {router.pathname}</p>
      </div>
    )
  }
  ```

  Use `:id` syntax in routes to capture URL parameters, then access them with `router.params.id`.
</TutorialStep>

<TutorialStep 
  stepId="routing-use-components"
  validator={(code) => {
    // Check if App imports and uses all components
    return code.includes('import') && code.includes('Navigation') && code.includes('HomePage') && code.includes('UserPage')
  }}
>
  Finally, update your `App.jsx` to use all the components:

  ```jsx
  import { Router, Route } from "kaioken/router"
  import { Navigation } from "./Navigation"
  import { HomePage } from "./HomePage"
  import { UserPage } from "./UserPage"

  function AboutPage() {
    return (
      <div style={{ padding: "20px" }}>
        <h2>About Us</h2>
        <p>This is a demo of Kaioken's routing system.</p>
      </div>
    )
  }

  export function App() {
    return (
      <Router>
        <Navigation />
        <Route path="/" element={<HomePage />} />
        <Route path="/about" element={<AboutPage />} />
        <Route path="/users/:id" element={<UserPage />} />
      </Router>
    )
  }
  ```

  Now you have a complete routing system with navigation, dynamic routes, and modular components!
</TutorialStep>

<div className="flex justify-between">
  <a href="/tutorial/context" className="link-button">Previous: Context</a>
  <a href="/tutorial/forms" className="link-button">Next: Forms</a>
</div> 