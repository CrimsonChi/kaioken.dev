import { TutorialStep } from "$/components/tutorials/TutorialStep"
import { TutorialContentFooter } from "$/components/tutorials/TutorialContentFooter"

export const files = import.meta.glob("./files/*", { eager: true, query: "?raw" })

## Advanced JSX

Now let's explore more advanced JSX patterns: rendering lists, 
conditional rendering, and dynamic styling by building a blog posts app with multiple components.

<TutorialStep 
  stepId="jsx-advanced-render-list"
  validator={(code) => {
    return code.includes('import { PostItem } from "./PostItem"') &&
      code.includes('{posts.map(') &&
      code.includes('<PostItem') &&
      code.includes('key={post.id}') &&
      code.includes('post={post}')
  }}
> 
  Let's start with rendering a list of posts using `map()`. Update `App.jsx` to render the posts in a list:

  ```jsx
  import { PostItem } from "./PostItem" // [!code ++]

  export function App() {
    const posts = [
      { id: 1, title: "Getting Started with Kaioken", content: "Learn the basics of this modern framework", published: true },
      { id: 2, title: "Advanced JSX Patterns", content: "Explore dynamic rendering and component composition", published: false },
      { id: 3, title: "State Management Tips", content: "Best practices for managing app state", published: true }
    ]
    
    return (
      <div>
        |++{posts.map((post) => (<PostItem key={post.id} post={post} />))}++|
      </div>
    )
  }
  ```

  <p className="font-medium text-xs">
    **Note**: The `key` prop helps Kaioken efficiently update the DOM when the list changes. 
    Always use a stable, unique value like `id` for list keys.
  </p>

</TutorialStep>

<TutorialStep 
  stepId="jsx-advanced-post-item"
  watchFile="PostItem.jsx"
  validator={(code) => {
    return code.includes('export function PostItem') &&
      code.includes('{post.title}') &&
      code.includes('{post.content}') &&
      code.includes('post.published') &&
      code.includes('Published') &&
      code.includes('Draft')
  }}
> 
  Now let's enhance the `PostItem.jsx` component to display the post's content
  and publication status:

  ```jsx
  export function PostItem({ post }) {
    return (
      <article>
        <h3>{post.title}</h3>
        |++<p>{post.content}</p>++|
        |++<span>Status: {post.published ? "Published" : "Draft"}</span>++|
      </article>
    )
  }
  ```
</TutorialStep>

<TutorialStep 
  stepId="jsx-advanced-conditional-rendering"
  validator={(code) => {
    return true
  }}
>
  Finally, let's filter the posts by their publication status:

  ```jsx
  import { PostItem } from "./PostItem"

  const showDrafts = false // [!code ++]

  export function App() {
    const posts = [
      { id: 1, title: "Getting Started with Kaioken", content: "Learn the basics of this modern framework", published: true },
      { id: 2, title: "Advanced JSX Patterns", content: "Explore dynamic rendering and component composition", published: false },
      { id: 3, title: "State Management Tips", content: "Best practices for managing app state", published: true }
    ]

    const filteredPosts = showDrafts ? posts : posts.filter((post) => post.published) // [!code ++]
    
    return (
      <div>
        {|~~filteredPosts~~|.map((post) => (<PostItem key={post.id} post={post} />))}
      </div>
    )
  }
  ```

  We now have a blog posts app with a list of posts, a post item component, and 
  are able to filter the posts by their publication status.
</TutorialStep>

<TutorialContentFooter
  previous={{ label: "JSX Basics", href: "/tutorial/jsx/basics" }}
  next={{ label: "State & Hooks", href: "/tutorial/state/hooks" }}
/>