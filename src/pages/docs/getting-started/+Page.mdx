import { DocsSectionHeader } from "$/components/DocsSectionHeader"
import { ExternalLink } from "$/components/atoms/ExternalLink"
import { CalloutBlock } from "$/components/atoms/CalloutBlock"
import { HighlightOnLoad } from "$/components/HighlightOnLoad"
import { packageManager } from "./packageManagerStore"
import { PackageManagerSelector } from "./PackageManagerSelector"
import { CopyInnerText } from "$/components/CopyInnerText"
import BunCliBash from "./bash.cli.bun.md"
import NpmCliBash from "./bash.cli.npm.md"
import PnpmCliBash from "./bash.cli.pnpm.md"
import YarnCliBash from "./bash.cli.yarn.md"
import BunInstallBash from "./bash.manual.bun.md"
import NpmInstallBash from "./bash.manual.npm.md"
import PnpmInstallBash from "./bash.manual.pnpm.md"
import YarnInstallBash from "./bash.manual.yarn.md"
import MountCode from "./mountCode.md"
import MountCodeTS from "./mountCode.ts.md"
import { siteCodeLang } from "$/state/siteCodeLang"

# Getting started

<HighlightOnLoad id="start-a-new-project">
  <DocsSectionHeader href="#start-a-new-project">
    Start a new project
  </DocsSectionHeader>
  <div>
    <div className="not-prose">
      <PackageManagerSelector />
      <CopyInnerText>
        {packageManager.value === "Bun" ? (
          <BunCliBash />
        ) : packageManager.value === "NPM" ? (
          <NpmCliBash />
        ) : packageManager.value === "Yarn" ? (
          <YarnCliBash />
        ) : (
          <PnpmCliBash />
        )}
      </CopyInnerText>
    </div>
  </div>
</HighlightOnLoad>

<HighlightOnLoad id="add-to-an-existing-project">
  <DocsSectionHeader href="#add-to-an-existing-project">
    Add to an existing project
  </DocsSectionHeader>

  <CalloutBlock fontSize="normal">
    <span>The following example demonstrates adding Kaioken to a <ExternalLink href="https://vitejs.dev/">Vite</ExternalLink> project.</span>
  </CalloutBlock>

  Add Kaioken and the Kaioken Vite plugin (for HMR and Devtools):

  <div className="not-prose">
    <PackageManagerSelector />
    <CopyInnerText>
      {packageManager.value === "Bun" ? (
        <BunInstallBash />
      ) : packageManager.value === "NPM" ? (
        <NpmInstallBash />
      ) : packageManager.value === "Yarn" ? (
        <YarnInstallBash />
      ) : (
        <PnpmInstallBash />
      )}
    </CopyInnerText>
  </div>

  Update your vite.config.ts (or add it in the top level of your project) and add the HMR plugin:

  <CopyInnerText>
    ```ts
    import { defineConfig } from "vite"
    import kaioken from "vite-plugin-kaioken"

    export default defineConfig({
      plugins: [kaioken()],
    })
    ```
  </CopyInnerText>

  <span>Add the "jsx" entry in your tsconfig.json:</span>

  ```json
  {
    "compilerOptions": {
      ...
      "jsx": "preserve",
      ...
    }
  }
  ```

  <span>Create a simple app:</span>

  <CopyInnerText>
    ```jsx
    export function App() {
      return <h1>Hello world!</h1>
    }
    ```
  </CopyInnerText>

  <span>Mount your app to the DOM:</span>
  
  <div className="not-prose">
    <CopyInnerText>
      {siteCodeLang.value === "js" ?
        (<MountCode />)
        : (<MountCodeTS />)
      }  
    </CopyInnerText>
  </div>

</HighlightOnLoad>

<HighlightOnLoad id="getting-help">
  <DocsSectionHeader href="#getting-help">
    Getting help
  </DocsSectionHeader>

  Reach out to us or get involved on <ExternalLink href="https://discord.gg/yspvgXegvs">Discord</ExternalLink>

</HighlightOnLoad>