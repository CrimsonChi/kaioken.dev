import { ExternalLink } from "$/components/atoms/ExternalLink"
import { CalloutBlock } from "$/components/atoms/CalloutBlock"
import { HighlightOnLoad } from "$/components/HighlightOnLoad"
import { packageManager } from "./packageManagerStore"
import { PackageManagerSelector } from "./PackageManagerSelector"
import { CopyInnerText } from "$/components/CopyInnerText"
import BunCliBash from "./bash.cli.bun.md"
import NpmCliBash from "./bash.cli.npm.md"
import PnpmCliBash from "./bash.cli.pnpm.md"
import YarnCliBash from "./bash.cli.yarn.md"
import BunInstallBash from "./bash.manual.bun.md"
import NpmInstallBash from "./bash.manual.npm.md"
import PnpmInstallBash from "./bash.manual.pnpm.md"
import YarnInstallBash from "./bash.manual.yarn.md"
import MountCode from "./mountCode.md"
import MountCodeTS from "./mountCode.ts.md"
import { siteCodeLang } from "$/state/langToggle"

# Getting started

<HighlightOnLoad hash="#start-a-new-project">
  <div className="docs-section-header mb-5">
    <a id="start-a-new-project" href="#start-a-new-project">Start a new project</a>
  </div>
  <div>
    <div className="not-prose">
      <PackageManagerSelector />
      <CopyInnerText>
        {packageManager.value === "Bun" ? (
          <BunCliBash />
        ) : packageManager.value === "NPM" ? (
          <NpmCliBash />
        ) : packageManager.value === "Yarn" ? (
          <YarnCliBash />
        ) : (
          <PnpmCliBash />
        )}
      </CopyInnerText>
    </div>
  </div>
</HighlightOnLoad>

<HighlightOnLoad hash="#add-to-an-existing-project">
  <div className="docs-section-header mb-5">
    <a id="add-to-an-existing-project" href="#add-to-an-existing-project">Add to an existing project</a>
  </div>

  <CalloutBlock>
    <span>The following example demonstrates adding Kaioken to a <ExternalLink href="https://vitejs.dev/">Vite</ExternalLink> project.</span>
  </CalloutBlock>

  Add Kaioken and the Kaioken Vite plugin (for HMR and Devtools):

  <div className="not-prose">
    <PackageManagerSelector />
    <CopyInnerText>
      {packageManager.value === "Bun" ? (
        <BunInstallBash />
      ) : packageManager.value === "NPM" ? (
        <NpmInstallBash />
      ) : packageManager.value === "Yarn" ? (
        <YarnInstallBash />
      ) : (
        <PnpmInstallBash />
      )}
    </CopyInnerText>
  </div>

  Update your vite.config.ts (or add it in the top level of your project) and add the HMR plugin:

  <CopyInnerText>
    ```ts
    import kaioken from "vite-plugin-kaioken"

    export default defineConfig({
      plugins: [kaioken()],
    })
    ```
  </CopyInnerText>

  <span>Add the "jsx" entry in your tsconfig.json:</span>

  ```json
  {
    "compilerOptions": {
      ...
      "jsx": "preserve",
      ...
    }
  }
  ```

  <span>Create a simple app:</span>

  <CopyInnerText>
    ```jsx
    export function App() {
      return <h1>Hello world!</h1>
    }
    ```
  </CopyInnerText>

  <span>Mount your app to the DOM:</span>
  
  <div className="not-prose">
    <CopyInnerText>
      {siteCodeLang.value === "js" ?
        (<MountCode />)
        : (<MountCodeTS />)
      }  
    </CopyInnerText>
  </div>

</HighlightOnLoad>

<HighlightOnLoad hash="#getting-help">
  <div className="docs-section-header">
    <a id="getting-help" href="#getting-help">Getting help</a>
  </div>
  Reach out to us or get involved on <ExternalLink href="https://discord.gg/yspvgXegvs">Discord</ExternalLink>

</HighlightOnLoad>