import { CodePreview } from "$/components/CodePreview"
import { useFormTypePreview } from "$/components/previews/useForm.type.preview"
import { UseFormStateTypePreview } from "$/components/previews/UseFormState.type.preview"
import { useFormConfigTypePreview } from "$/components/previews/UseFormConfig.type.preview"
import { ExternalLink } from "$/components/atoms/ExternalLink"
import { DocsSection } from "$/components/DocsSection"
import { CopyInnerText } from "$/components/CopyInnerText"
import { siteCodeLang } from "$/state/siteCodeLang"
import BasicExample from "./basicExample.md"
import BasicExampleTS from "./basicExample.ts.md"
import ValidationExample from "./validationExample.md"
import ValidationExampleTS from "./validationExample.ts.md"

# Form

<CodePreview data={useFormTypePreview} /> is a hook that provides a powerful yet simple 
way to handle form state, validation, and submission. It offers a declarative approach 
to form management with built-in validation, error handling, and state management.

Inspired by <ExternalLink href="https://tanstack.com/form" >TanStack Form</ExternalLink>, 
it provides a flexible API that can handle complex form scenarios while maintaining simplicity.

<DocsSection id="basic-usage" title="Basic Usage">
  <CodePreview data={useFormTypePreview} /> accepts a <CodePreview data={useFormConfigTypePreview} /> 
  configuration object and returns a <CodePreview data={UseFormStateTypePreview} /> that provides:

  - **Field**: Component for managing individual form fields
  - **Subscribe**: Component for subscribing to form state changes
  - **handleSubmit**: Function to handle form submission
  - **reset**: Function to reset the form to initial values
  - **getFieldState**: Function to get the state of a specific field

  <CopyInnerText>
    {siteCodeLang.value === "js" ? <BasicExample /> : <BasicExampleTS />}
  </CopyInnerText>
</DocsSection>

<DocsSection id="validation" title="Validation">
  Form fields can be validated using the `validators` prop. Validation can be 
  triggered on different events like `onChange`, `onBlur`, or `onSubmit`. The 
  validator functions return error messages when validation fails.

  <CopyInnerText>
    {siteCodeLang.value === "js" ? <ValidationExample /> : <ValidationExampleTS />}
  </CopyInnerText>
</DocsSection>

<DocsSection id="form-components" title="Form Components">
  ### Field Component
  The `Field` component manages individual form fields. It provides the field state 
  and handlers to the render function:

  - **state.value**: Current field value
  - **state.errors**: Array of validation errors
  - **handleChange**: Function to update field value
  - **handleBlur**: Function to handle field blur events

  ### Subscribe Component
  The `Subscribe` component allows you to subscribe to specific parts of the form 
  state using a selector function. This is useful for rendering buttons or other 
  UI elements based on form state.
</DocsSection>

### Related
<ul>
  <li><a href="/docs/hooks/useRef">useRef</a></li>
  <li><a href="/docs/hooks/useState">useState</a></li>
  <li><a href="/docs/hooks/useId">useId</a></li>
</ul>
