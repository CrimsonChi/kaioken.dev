import { CodeBlock } from "$/components/CodeBlock"
import { InlineCodeBlock } from "$/components/atoms/InlineCodeBlock"
import { CodePreview } from "$/components/CodePreview"
import {UseAsyncResultTypePreview} from "$/components/previews/UseAsyncResult.type.preview"


# useAsync

Similar to <a href="/docs/hooks/useEffect">useEffect</a>,
but runs an async function and returns a tuple containing a <CodePreview data={UseAsyncResultTypePreview} />.

### Example

<div className="not-prose">
  <CodeBlock 
    lang="jsx" 
    code={`\
import { useState, useAsync } from "kaioken"

export function UseAsyncExample() {
  const [productId, setProductId] = useState(1)

  const [data, loading, error] = useAsync(async () => {
    return (await fetch(\`https://dummyjson.com/products/\${productId}\`)).json()
  }, [productId])

  return (
    <div>
      <button onclick={() => setProductId((prev) => prev + 1)}>Next</button>
      {data ? (
        <ProductCard product={data} />
      ) : loading ? (
        <Spinner />
      ) : (
        <p>{error.message}</p>
      )}
    </div>
  )
}`} />
</div>

### Related
<ul>
  <li><a href="/docs/hooks/dependency-arrays">Dependency arrays</a></li>
</ul>

